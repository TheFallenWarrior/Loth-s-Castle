
.PHONY:	all run asm run-pc clean

all: main.nes

main.nes: main.c
	cl65 -Oir -t nes main.c tileset.s -o $@

main.s: main.c
	cc65 -t nes -T main.c -o $@

run: main.nes
	fceux main.nes
	@# remove files generated by FCEUX
	@rm -f main.cdl main.nes.ram.nl

asm: main.s

main: main.c game.c
	gcc main.c -lraylib -lGL -lm -lpthread -ldl -lrt -lX11 -o $@

run-pc: main
	./main

clean:
	rm -f main.nes main.s main.o tileset.o main
